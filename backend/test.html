<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Internet Store</title>
    <script>
        async function getProducts() {
            const response = await fetch('/api/v1/get_products');
            const products = await response.json();
            const productsContainer = document.getElementById('products-container');
            productsContainer.innerHTML = ''; // Clear previous products
            products.forEach(product => {
                const productElement = document.createElement('div');
                productElement.className = 'product';
                productElement.innerHTML = `
                    <h2>Product ID: ${product.id}</h2>
                    <h3>Name: ${product.name}</h3>
                    <p>Description: ${product.description}</p>
                    <img src="${product.image}" alt="${product.name}" />
                    <p>Price: $${product.price.toFixed(2)}</p>
                    <p>Available: ${product.available}</p>
                `;
                productsContainer.appendChild(productElement);
            });
        }

        async function addProduct() {
            const product = {
                name: document.getElementById('name').value,
                description: document.getElementById('description').value,
                image: document.getElementById('image').value,
                price: parseFloat(document.getElementById('price').value),
                available: parseInt(document.getElementById('available').value)
            };
            const response = await fetch('/api/v1/add_product', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(product)
            });
            const result = await response.json();
            console.log(result);
            getProducts(); // Refresh the product list
        }

        async function updateProduct() {
            const product = {
                id: document.getElementById('update-id').value,
                name: document.getElementById('update-name').value,
                description: document.getElementById('update-description').value,
                image: document.getElementById('update-image').value,
                price: parseFloat(document.getElementById('update-price').value),
                available: parseInt(document.getElementById('update-available').value)
            };
            const response = await fetch('/api/v1/update_product', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(product)
            });
            const result = await response.json();
            console.log(result);
            getProducts(); // Refresh the product list
        }

        async function removeProduct() {
            const productId = {
                id: document.getElementById('remove-id').value
            };
            const response = await fetch('/api/v1/remove_product', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(productId)
            });
            const result = await response.json();
            console.log(result);
            getProducts(); // Refresh the product list
        }
    </script>
</head>
<body>
    <h1>Internet Store</h1>
    <button onclick="getProducts()">Get Products</button>
    <div id="products-container"></div>
    <h2>Add Product</h2>
    <input type="text" id="name" placeholder="Name">
    <input type="text" id="description" placeholder="Description">
    <input type="text" id="image" placeholder="Image URL">
    <input type="number" id="price" placeholder="Price">
    <input type="number" id="available" placeholder="Available">
    <button onclick="addProduct()">Add Product</button>
    <h2>Update Product</h2>
    <input type="text" id="update-id" placeholder="Product ID">
    <input type="text" id="update-name" placeholder="Name">
    <input type="text" id="update-description" placeholder="Description">
    <input type="text" id="update-image" placeholder="Image URL">
    <input type="number" id="update-price" placeholder="Price">
    <input type="number" id="update-available" placeholder="Available">
    <button onclick="updateProduct()">Update Product</button>
    <h2>Remove Product</h2>
    <input type="text" id="remove-id" placeholder="Product ID">
    <button onclick="removeProduct()">Remove Product</button>
</body>
</html>